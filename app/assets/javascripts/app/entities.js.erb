//= depends_on_asset 'entity-selector'

(function() {
  app = angular.module('entities', []);

  app.controller('EntitiesController', ['$http', function($http) {
    var _self = this;
    this.entities = [];
    this.currentEntity = null;
    this.currentEntityId = null;
    this.setCurrentEntity = function() {
      _self.currentEntity = _self.entities.
      filter(function(e){ return e.id == _self.currentEntityId;})[0];
    };
    $http.get('/entities.json').success(function(data) {
      _self.entities = data;
    });
  }]);

  app.directive('entitySelector', function() {
    return {
      restrict: 'E',
      templateUrl: '<%= asset_path('entity-selector.html') %>'
    };
  });

})();

