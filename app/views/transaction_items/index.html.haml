%h2#page_title #{h @account.name} Transaction items

%table#transaction_items_table.list{cellspacing: 0, cellpadding: 0}
  %tr
    %th.transaction_date_cell Transaction date
    %th.description_cell Description
    %th.account_cell Account
    %th.reconciled_cell Rec.
    %th.amount_cell.number_column Amount
    %th.balance_cell.number_column Balance
    %th.actions &nbsp;
  -@transaction_items.each_with_index do |item, index|
    %tr{ class: ((index % 2) == 0) ? '' : 'alt_table_row', onclick: 'toggleEditState' }
      %td.transaction_date_cell= format_date(item.transaction.transaction_date)
      %td.description_cell= item.transaction.description
      %td.account_cell= other_account(item)
      %td.reconciled_cell.check_column= item.reconciled? ? 'X' : ''
      %td.amount_cell.number_column= format_currency(item.polarized_amount)
      %td.balance_cell.number_column= format_currency(@balance += item.polarized_amount)
      %td.actions
        =link_to 'Edit', edit_transaction_item_path(item), class: 'edit_button', title: 'Click here to edit the transaction.'
        =render 'shared/delete_form', resource: item, url: transaction_item_url(item)
.actions
  =link_to 'Back', entity_accounts_path(@account.entity), class: 'back_button', title: 'Click here to return to the account list.'
  =link_to 'Reconcile', new_account_reconciliation_path(@account), class: 'reconcile_button'