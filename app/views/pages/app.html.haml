#entity_and_account
  #entity_container
    %select{ data: { bind: "options: entities, optionsText: 'name', value: selectedEntity" } }
  #account_container{ data: { bind: "with: selectedEntity()" }}
    %table.list#accounts_table{ cellspacing: 0, cellpadding: 0}
      %tr
        %th Name
        %th Balance
      %tbody{ data: { bind: "foreach: accounts" }}
        %tr{ data: { bind: "css: cssClass" }}
          %td
            %span{ data: { bind: "text: name, css: cssClass" }}
          %td.number_column{ data: { bind: "text: formattedBalanceWithChildren" }}
    
:javascript  
  $(function() {
    // Initialize and bind the view model
    app = new MoneyApp();
    ko.applyBindings(app);
    
    // Initialize the tab panel and refresh when new tabs are added
    //var tabs = $('#tab_container').tabs();
    //app.selectedAccountIndex.subscribe(function(index) {
    //  tabs.tabs('refresh');
    //  tabs.tabs('option', 'active', index);
    //});
  })
